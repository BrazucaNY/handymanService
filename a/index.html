<!DOCTYPE html>
<html lang="en">
<head>
    <!-- BASIC META -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Here Handyman | Handyman Plainfield IL</title>
    <meta name="description" content="Here Handyman provides expert kitchen and bathroom remodeling, home repairs, and professional handyman services with quality craftsmanship you can trust.">
    
    <!-- Preconnect to external domains with priorities -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.google.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <!-- Behold.so connections - will be preconnected when needed -->
    <link rel="preconnect" href="https://w.behold.so" fetchpriority="low">
    <link rel="preconnect" href="https://feeds.behold.so" fetchpriority="low">
    
    <!-- Preload LCP image -->
    <link rel="preload" as="image" href="assets/images/van-400x411.webp" imagesrcset="assets/images/van-400x411.webp 400w, assets/images/van-600x616.webp 600w, assets/images/van.webp 800w" imagesizes="(max-width: 480px) 400px, (max-width: 768px) 600px, 800px" fetchpriority="high">
    
    <!-- Google Fonts with font-display: swap -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Oswald:wght@400;500;600;700&display=swap" 
          rel="stylesheet" 
          media="print" 
          onload="this.media='all'; this.onload=null">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet"></noscript>
    
    <script>
    // Add font loading class
    document.documentElement.classList.add('fonts-loading');
    
    // Check if fonts are loaded
    document.fonts.ready.then(function() {
        document.documentElement.classList.remove('fonts-loading');
        document.documentElement.classList.add('fonts-loaded');
    });
    </script>
    
    <!-- Fallback for users with JavaScript disabled -->
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet">
        <style>
            /* Fallback styles when JavaScript is disabled */
            html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
            html.fonts-loaded { font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
            html.fonts-loaded h1,
            html.fonts-loaded h2,
            html.fonts-loaded h3,
            html.fonts-loaded .desktop-nav a {
                font-family: 'Oswald', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            }
        </style>
    </noscript>
    <style>
        /* Local font declarations with font-display: swap */
        @font-face {
            font-family: 'Font Awesome 6 Brands';
            font-style: normal;
            font-weight: 400;
            font-display: swap;
            src: url('assets/wooff2/fa-brands-400.woff2') format('woff2');
        }
        @font-face {
            font-family: 'Font Awesome 6 Solid';
            font-style: normal;
            font-weight: 900;
            font-display: swap;
            src: url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/webfonts/fa-solid-900.woff2') format('woff2');
        }
    </style>
    
    <!-- Font Awesome - Using local files instead of kit -->
    <link rel="preload" href="assets/wooff2/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="assets/wooff2/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- Preload critical fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    
    <link rel="preload" href="https://fonts.gstatic.com/s/oswald/v49/TK3iWkUHHAIjg752HT8Ghe4.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="https://fonts.gstatic.com/s/montserrat/v25/JTUHjIg1_i6t8kCHKm4532VJOt5-QNFgpCtr6Hw5aXx-p7K4KLg.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- Preload critical CSS -->
    <link rel="preload" href="assets/css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="assets/css/style.css"></noscript>
    
    <!-- Preload about page CSS for better navigation performance -->
    <link rel="preload" href="assets/css/about-styles.css" as="style" onload="if(media!=='all')media='all'">
    
    <!-- Font Awesome with font-display: swap -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" 
          integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" 
          crossorigin="anonymous" 
          referrerpolicy="no-referrer" 
          media="print" 
          onload="this.media='all'; this.onload=null" />
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"></noscript>
    
    <!-- Preload critical fonts with font-display: swap -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap"></noscript>

    <!-- Critical CSS - Inline for above-the-fold content -->
    <style id="critical-css">
    /* Local Oswald font with font-display: swap */
    @font-face {
        font-family: 'Oswald';
        font-style: normal;
        font-weight: 400;
        src: local('Oswald Regular'),
             local('Oswald-Regular'),
             url('assets/wooff2/TK3IWkUHHAIjg75cFRf3bXL8LICs1_Fv40pKlN4NNSeSASz7FmlWHYjMdZwl.woff2') format('woff2');
        font-display: swap;
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
    
    @font-face {
        font-family: 'Montserrat';
        font-style: normal;
        font-weight: 400;
        src: url('https://fonts.gstatic.com/s/montserrat/v25/JTUHjIg1_i6t8kCHKm4532VJOt5-QNFgpCtr6Hw5aXx-p7K4KLg.woff2') format('woff2');
        font-display: swap;
    }
    /*! Critical CSS - Optimized for above-the-fold content */
    :root {
        --primary-color: #f5d71a;
        --secondary-color: #1a1a1a;
        --text-color: #333;
        --background-color: #fff;
        --dark-bg: #1a1a1a;
    }
    * { box-sizing: border-box; }
    body {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        line-height: 1.6;
        color: var(--text-color);
    }
    .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }
    header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
        background: #fff;
        box-shadow: 0 2px 10px rgba(0,0,0,.1);
    }
    .logo img {
        height: 40px;
        width: auto;
        display: block;
    }
    main {
        padding-top: 80px;
    }
    /* Ensure LCP image is visible */
    .static-banner {
        position: relative;
        background: var(--dark-bg);
        color: #fff;
        padding: 100px 0;
        text-align: center;
    }
    .static-banner h1 {
        font-family: 'Oswald', sans-serif;
        font-size: 2.5rem;
        margin: 0 0 20px;
        line-height: 1.2;
    }
    </style>
    <!-- Load non-critical CSS asynchronously -->
    <link rel="preload" href="assets/css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="assets/css/optimization.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="assets/css/style.css">
        <link rel="stylesheet" href="assets/css/optimization.css">
    </noscript>

    <!-- SEO -->
    
    <!-- Make touch events passive before any other scripts load -->
    <script>
    // This needs to run before any other scripts
    (function() {
        // Store original event handler properties
        const originalAddEventListener = EventTarget.prototype.addEventListener;
        const originalRemoveEventListener = EventTarget.prototype.removeEventListener;
        
        // Override addEventListener to make touch events passive
        EventTarget.prototype.addEventListener = function(type, listener, options) {
            const passiveEvents = ['touchstart', 'touchmove', 'touchend', 'touchcancel'];
            
            if (passiveEvents.includes(type.toLowerCase())) {
                const passiveOptions = {
                    passive: true,
                    ...(typeof options === 'object' ? options : {})
                };
                return originalAddEventListener.call(this, type, listener, passiveOptions);
            }
            
            return originalAddEventListener.apply(this, arguments);
        };
        
        // Keep original removeEventListener
        EventTarget.prototype.removeEventListener = originalRemoveEventListener;
        
        // Handle direct property assignments (like element.ontouchstart = ...)
        const handlerProperties = ['ontouchstart', 'ontouchmove', 'ontouchend', 'ontouchcancel'];
        
        handlerProperties.forEach(prop => {
            const descriptor = Object.getOwnPropertyDescriptor(HTMLElement.prototype, prop) || 
                             Object.getOwnPropertyDescriptor(Element.prototype, prop);
            
            if (descriptor && descriptor.set) {
                const originalSet = descriptor.set;
                
                Object.defineProperty(HTMLElement.prototype, prop, {
                    set: function(fn) {
                        const wrappedFn = function(e) {
                            if (e && typeof e.preventDefault === 'function') {
                                e.preventDefault = function() {};
                            }
                            return fn.call(this, e);
                        };
                        return originalSet.call(this, wrappedFn);
                    },
                    get: descriptor.get,
                    configurable: true,
                    enumerable: true
                });
            }
        });
    })();
    </script>
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.herehandyman.com/">
    <meta name="theme-color" content="#00b833">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Here Handyman">

    <!-- FAVICON -->
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon-16x16.png">
    <link rel="manifest" href="./site.webmanifest">
    <link rel="mask-icon" href="assets/images/safari-pinned-tab.svg" color="#00b833">
    <meta name="msapplication-TileColor" content="#00b833">
    <link rel="apple-touch-icon" href="assets/images/icon-192x192.png">
    <meta name="msapplication-config" content="/browserconfig.xml">

    <!-- OPEN GRAPH TAGS -->
    <meta property="og:title" content="Here Handyman | Trusted Remodeling & Home Repair">
    <meta property="og:description" content="Professional kitchen and bathroom remodeling, home repairs, and handyman services done right.">
    <meta property="og:image" content="https://www.herehandyman.com/assets/images/logo-1200x630.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:url" content="https://www.herehandyman.com/">
    <meta property="og:site_name" content="Here Handyman">
    <meta property="og:type" content="website">

    <!-- TWITTER CARD -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@herehandyman">
    <meta name="twitter:title" content="Here Handyman | Remodeling & Home Repair">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    
    <!-- Behold widget domains -->
    <link rel="preconnect" href="https://w.behold.so" crossorigin>
    <link rel="preconnect" href="https://feeds.behold.so" crossorigin>
    <link rel="dns-prefetch" href="https://w.behold.so">
    <link rel="dns-prefetch" href="https://feeds.behold.so">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://www.googletagmanager.com">


    <!-- FONTS & ICONS -->


<!-- ==================== INSTAGRAM SECTION ==================== -->
<section id="instagram" class="instagram-section" style="padding: 60px 0; background-color: #f9f9f9;">
    <div class="container">
        <h2 class="section-title text-center">Our Work on Instagram</h2>
        <behold-widget feed-id="JCrjd6q1Ckb8Hi3ejN9a"></behold-widget>
    <!-- Behold Instagram Feed - Optimized Loading -->
    <script>
        // Load Behold widget after critical content
        function loadBeholdWidget() {
            // Check if the widget container is in viewport
            const widgetContainer = document.querySelector('.behold-widget');
            if (!widgetContainer) return;

            // Use IntersectionObserver to load when widget is near viewport
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Create script element with attributes for better performance
                        const script = document.createElement('script');
                        script.src = 'https://w.behold.so/widget.js';
                        script.type = 'module';
                        script.async = true;
                        script.defer = true;
                        script.fetchPriority = 'low';
                        
                        // Set up error handling
                        script.onerror = function() {
                            console.warn('Behold widget failed to load');
                            widgetContainer.innerHTML = '<p>Unable to load Instagram feed. Please refresh the page or check back later.</p>';
                        };
                        
                        document.body.appendChild(script);
                        observer.disconnect(); // Stop observing once loaded
                    }
                });
            }, {
                rootMargin: '200px', // Start loading when within 200px of viewport
                threshold: 0.01
            });

            observer.observe(widgetContainer);
        }

        // Start loading when the page is idle or after a timeout
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                if ('requestIdleCallback' in window) {
                    window.requestIdleCallback(loadBeholdWidget, { timeout: 2000 });
                } else {
                    // Fallback for browsers that don't support requestIdleCallback
                    window.addEventListener('load', loadBeholdWidget);
                }
            });
        } else if ('requestIdleCallback' in window) {
            window.requestIdleCallback(loadBeholdWidget, { timeout: 2000 });
        } else {
            window.addEventListener('load', loadBeholdWidget);
        }
    </script>  
<!-- ... rest of the code remains the same ... -->
    
    // Load when user interacts with the page
    const userInteractionEvents = ['mousedown', 'touchstart', 'keydown'];
    const loadOnInteraction = function() {
      userInteractionEvents.forEach(event => {
        document.removeEventListener(event, loadOnInteraction, { once: true });
      });
      clearTimeout(loadTimer);
      loadBeholdWidget();
    };
    
    userInteractionEvents.forEach(event => {
      document.addEventListener(event, loadOnInteraction, { once: true });
    });
  });
</script>
    </div>
</section>

<!-- ==================== CONTACT SECTION ==================== -->
<section id="contact" class="contact-section">
    <div class="container">

        <!-- Section Heading -->
        <h2>Contact Us</h2>

        <div class="contact-content">

            <!-- Contact Information -->
            <div class="contact-info">

                <!-- Phone -->
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <p><a href="tel:5163500801">(516) 350-0801</a></p>
                </div>

                <!-- Email -->
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <p><a href="mailto:info@herehandyman.com">info@herehandyman.com</a></p>
                </div>

            </div>

            <!-- Contact Form -->
            <form id="contact-form" class="contact-form">

                <!-- Honeypot field (spam protection) -->
                <input type="text" name="company" style="display:none">

                <!-- Name Field -->
                <div class="form-group">
                    <input type="text" name="name" placeholder="Your Name" required>
                </div>

                <!-- Email Field -->
                <div class="form-group">
                    <input type="email" name="email" placeholder="Your Email" required>
                </div>

                <!-- Message Field -->
                <div class="form-group">
                    <textarea name="message" placeholder="How can we help you?" required></textarea>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="cta-button">Send Message</button>

            </form>

        </div>
    </div>
</section>
<footer class="here-handyman-footer">
    <div class="footer-container">
        <div class="footer-column">
            <img 
                src="assets/images/logo.webp"
                srcset="assets/images/logo-360x120.webp 2x"
                alt="Here Handyman Logo" 
                class="footer-logo" 
                width="180" 
                height="60" 
                loading="lazy"
                decoding="async">
            <p>Your trusted partner for professional home remodeling and renovation services.</p>
            <div class="social-icons">
                <a href="https://facebook.com/herehandyman" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
                    <i class="fab fa-facebook-f" aria-hidden="true"></i>
                    <span class="sr-only">Facebook</span>
                </a>
                <a href="https://instagram.com/herehandyman" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                    <i class="fab fa-instagram" aria-hidden="true"></i>
                    <span class="sr-only">Instagram</span>
                </a>
                <a href="https://yelp.com/biz/here-handyman-plainfield" target="_blank" rel="noopener noreferrer" aria-label="Yelp">
                    <i class="fab fa-yelp" aria-hidden="true"></i>
                    <span class="sr-only">Yelp</span>
                </a>
            </div>
        </div>

        <div class="footer-column">
            <h4 class="footer-title">Quick Links</h4>
            <div class="yellow-line"></div>
            <nav class="footer-links">
                <a href="#home">Home</a>
                <a href="#services">Our Services</a>
                <a href="#about">About Us</a>
                <a href="#gallery">Project Gallery</a>
                <a href="#contact">Free Estimate</a>
            </nav>
        </div>

        <div class="footer-column">
            <h4 class="footer-title">Contact Us</h4>
            <div class="yellow-line"></div>
            <div class="contact-details">
                <p><i class="fa-solid fa-phone"></i> <a href="tel:+15163500801">(516) 350-0801</a></p>
                <p><i class="fa-solid fa-envelope"></i> <a href="mailto:info@herehandyman.com">info@herehandyman.com</a></p>
                <p><i class="fa-solid fa-location-dot"></i> Serving Plainfield, IL and surrounding areas</p>
            </div>
        </div>
    </div>
    
    <div class="footer-bottom">
        <p>&copy; 2025 Here Handyman. All rights reserved. | 
            <a href="privacy-policy-standalone.html" target="_blank" rel="noopener">Privacy Policy</a> | 
            <a href="https://www.ftc.gov/business-guidance/small-businesses" target="_blank" rel="noopener noreferrer">FTC Small Business Resources</a> | 
            <a href="https://www.copyright.gov/" target="_blank" rel="noopener noreferrer">U.S. Copyright Office</a> | 
            <a href="/terms-of-service">Terms of Service</a>
        </p>
    </div>
</footer>

<!-- =====================================================
     BACK TO TOP BUTTON
     Appears on scroll and returns user to hero section
====================================================== -->
<a href="#home" class="back-to-top" id="backToTopBtn" aria-label="Back to top">
    <i class="fas fa-arrow-up" aria-hidden="true"></i>
</a>

<!-- Behold Widget - Loaded on demand with optimized caching -->
<div id="behold-placeholder" class="behold-placeholder" style="padding: 60px 0; background-color: #f9f9f9; text-align: center; cursor: pointer; min-height: 200px;">
    <h2 class="section-title">View Our Work on Instagram</h2>
    <p><button class="cta-button" style="margin: 10px auto; display: inline-block;">Load Instagram Feed</button></p>
</div>
<div id="behold-container" class="behold-container" style="display: none; padding: 20px 0; min-height: 200px;">
    <div class="container">
        <behold-widget feed-id="JCrjd6q1Ckb8Hi3ejN9a"></behold-widget>
    </div>
</div>
<script>
// Preconnect to required domains early
['https://w.behold.so', 'https://feeds.behold.so'].forEach(domain => {
    const link = document.createElement('link');
    link.rel = 'preconnect';
    link.href = domain;
    document.head.appendChild(link);
});

// Load Behold widget on user interaction
function loadBeholdWidget() {
    if (window.beholdWidgetLoaded) return;
    window.beholdWidgetLoaded = true;
    
    const container = document.getElementById('behold-container');
    const placeholder = document.getElementById('behold-placeholder');
    
    // Show loading state
    placeholder.innerHTML = '<p>Loading Instagram feed...</p><div class="loading-spinner"></div>';
    
    // Create and load the widget script
    const script = document.createElement('script');
    script.src = 'https://w.behold.so/widget.js';
    script.async = true;
    script.fetchPriority = 'low';
    
    // Add cache control headers for the script
    const link = document.createElement('link');
    link.rel = 'preload';
    link.href = script.src;
    link.as = 'script';
    document.head.appendChild(link);
    
    script.onload = function() {
        // Widget loaded, show container and hide placeholder
        container.style.display = 'block';
        placeholder.style.display = 'none';
        
        // Cache the widget in localStorage for future visits
        try {
            localStorage.setItem('beholdWidgetLoaded', 'true');
            localStorage.setItem('beholdWidgetLoadedAt', Date.now());
        } catch (e) {
            console.warn('Could not cache widget state:', e);
        }
    };
    
    script.onerror = function() {
        // Handle loading error
        placeholder.innerHTML = '<p>Could not load Instagram feed. <button class="cta-button" style="margin: 10px auto; display: inline-block;" onclick="loadBeholdWidget()">Try Again</button></p>';
    };
    
    document.head.appendChild(script);
}

// Check if we should load the widget automatically
function initBeholdWidget() {
    const placeholder = document.getElementById('behold-placeholder');
    
    // Check if widget was previously loaded and is still fresh (less than 1 hour old)
    try {
        const lastLoaded = parseInt(localStorage.getItem('beholdWidgetLoadedAt') || '0');
        const oneHourAgo = Date.now() - (60 * 60 * 1000);
        
        if (localStorage.getItem('beholdWidgetLoaded') === 'true' && lastLoaded > oneHourAgo) {
            // Widget was recently loaded, show it immediately
            loadBeholdWidget();
            return;
        }
    } catch (e) {
        console.warn('Could not check widget cache:', e);
    }
    
    // Set up click handler for placeholder
    placeholder.addEventListener('click', function(e) {
        // Only trigger on the button or its children
        if (e.target.matches('.cta-button, .cta-button *') || e.target === this) {
            loadBeholdWidget();
        }
    }, { once: true });
    
    // Load after 10 seconds if no interaction
    setTimeout(() => {
        if (!window.beholdWidgetLoaded && !placeholder.classList.contains('clicked')) {
            loadBeholdWidget();
        }
    }, 10000);
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initBeholdWidget);
} else {
    initBeholdWidget();
}
</script>
<style>
/* Loading spinner */
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
.loading-spinner {
    border: 4px solid rgba(0, 0, 0, 0.1);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border-left-color: var(--primary-color);
    animation: spin 1s linear infinite;
    margin: 20px auto;
}
/* Ensure container has a minimum height to prevent layout shifts */
.behold-container[style*="display: none"] {
    display: block !important;
    visibility: hidden;
    min-height: 0;
    padding: 0 !important;
    margin: 0 !important;
}
</style>

    <!-- =====================================================
         MAIN JAVASCRIPT FILE
         Controls animations, navigation, gallery, and UI logic
    ====================================================== -->
    <script>
    // Simple smooth scroll implementation
    document.addEventListener('DOMContentLoaded', function() {
        // Handle all anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    // Close mobile menu if open
                    const mobileMenu = document.getElementById('mobile-menu');
                    if (mobileMenu && mobileMenu.classList.contains('active')) {
                        mobileMenu.classList.remove('active');
                        document.body.style.overflow = '';
                        document.getElementById('hamburger-btn').setAttribute('aria-expanded', 'false');
                    }
                    
                    // Scroll to target
                    window.scrollTo({
                        top: targetElement.offsetTop - 90, // Adjust for fixed header
                        behavior: 'smooth'
                    });
                    
                    // Update URL
                    if (history.pushState) {
                        history.pushState(null, null, targetId);
                    } else {
                        window.location.hash = targetId;
                    }
                }
            });
        });
    });
    </script>
    
    <!-- Load main.js after our inline script -->
    <!-- Preload critical resources -->
    <link rel="preload" href="assets/images/van.webp" as="image" type="image/webp" media="(min-width: 768px)">
    
    <!-- Font loading script -->
    <script>
    // Inline critical font loading logic
    (function() {
        // Add loading class to HTML
        document.documentElement.classList.add('fonts-loading');
        
        // Load fonts after a short delay
        setTimeout(function() {
            if ('fonts' in document) {
                Promise.all([
                    document.fonts.load('1em Oswald'),
                    document.fonts.load('1em Montserrat')
                ]).then(function() {
                    document.documentElement.classList.remove('fonts-loading');
                    document.documentElement.classList.add('fonts-loaded');
                }).catch(function() {
                    document.documentElement.classList.remove('fonts-loading');
                });
            } else {
                document.documentElement.classList.remove('fonts-loading');
            }
        }, 100);
    })();
    </script>
    
    <!-- Load main JavaScript with defer -->
    <!-- Google Tag Manager with error handling -->
    <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-7QYNVWMYJJ');
    
    // Fallback if GTM fails to load
    setTimeout(function() {
        if (!window.google_tag_manager) {
            console.warn('GTM failed to load, using fallback analytics');
            // Add your fallback analytics code here if needed
        }
    }, 2000);
    </script>
    
    <!-- Load main JavaScript with defer -->
    <script src="assets/js/main.js" defer></script>
    
    <!-- Third-party scripts are loaded on demand -->
    
    <!-- Load non-critical scripts after page load -->
    <script>
    window.addEventListener('load', function() {
        // Load non-critical scripts here
        const nonCriticalScripts = [
            // Add any non-critical script URLs here
        ];
        
        nonCriticalScripts.forEach(src => {
            const script = document.createElement('script');
            script.src = src;
            script.async = true;
            document.body.appendChild(script);
        });
    });
    </script>

</body>
</html>
